// Dates generator
const dates = [
    {id: 'publicacionofertadefinitiva',date: '16 Sep 2021',content: 'Publicación Oferta Definitiva de Carreras, Vacantes y Ponderaciones'},
    {id: 'finmodificardatosinscripcion',date: '22 Sep 2021',content: 'Fin Plazo Para Modificar Datos De Inscripcion En La Plataforma'},
    {id: 'fuas',date: '5 Oct 2021',content: 'Postulación A Beneficios Estudiantiles Completando FUAS'},
    {id: 'publicacionnominaoficial',date: '21 Oct 2021',content: 'Publicación Nomina Oficial De Carreras PACE Con Oferta Centralizada'},
    {id: 'publicacionofertadefinitiva2',date: '25 Nov 2021',content: 'Publicación Oferta Definitiva de Carreras, Vacantes y Ponderaciones'},
    {id: 'pruebacomprensionlectora_g1',date: '06 Dec 2021, 10:00 AM',hour: '10:00 AM',content: 'Rendición Prueba de Comprensión Lectora (Grupo 1)'},
    {id: 'pruebaciencias_g1',date: '06 Dec 2021, 03:00 PM',hour: '03:00 PM',content: 'Rendición Prueba de Ciencias (Grupo 1)'},
    {id: 'pruebamatematica_g1',date: '07 Dec 2021, 10:00 AM',hour: '10:00 AM',content: 'Rendición Prueba de Matemática (Grupo 1)'},
    {id: 'pruebahistoria_g1',date: '07 Dec 2021, 03:00 PM',hour: '03:00 PM',content: 'Rendición Prueba de Historia (Grupo 1)'},
    {id: 'pruebacomprensionlectora_g2',date: '09 Dec 2021, 10:00 AM',hour: '10:00 AM',content: 'Rendición Prueba de Comprensión Lectora (Grupo 2)'},
    {id: 'pruebaciencias_g2',date: '09 Dec 2021, 03:00 PM',hour: '03:00 PM',content: 'Rendición Prueba de Ciencias (Grupo 2)'},
    {id: 'pruebamatematica_g2',date: '10 Dec 2021, 10:00 AM',hour: '10:00 AM',content: 'Rendición Prueba de Matemática (Grupo 2)'},
    {id: 'pruebahistoria_g2',date: '10 Dec 2021, 03:00 PM',hour: '03:00 PM',content: 'Rendición Prueba de Historia (Grupo 2)'},
    {id: 'ranking',date: '15 Dec 2021',content: 'Simulación Puntaje Ranking'},
    {id: 'resultadospdt',date: '11 Jan 2022, 08:00 AM',hour: '08:00 AM',content: 'Publicación Resultados PDT'},
    {id: 'periodopostulacionuniversidadesadscritas',date: '11 Jan 2022, 09:00 AM',hour: '09:00 AM',content: 'Inicio Período De Postulaciones A Universidades Adscritas'},
    {id: 'verificacionpuntajes',date: '11 Jan 2022, 09:00 AM', end: '11 Jan 2022, 08:00 PM',hour: '09:00 AM',content: 'Verificación De Puntajes'},
    {id: 'finpostulaciones',date: '14 Jan 2022, 01:00 PM',hour: '01:00 PM',content: 'Fin Etapa de Postulaciones'},
    {id: 'resultadosprocesoseleccion',date: '24 Jan 2022, 12:00 PM',hour: '12:00 PM',content: 'Resultados del Proceso de Selección'},
    {id: 'verificacionresultadosseleccion_1',date: '24 Jan 2022, 12:00 PM', end: '24 Jan 2022, 05:00 PM',hour: '12:00 PM',content: 'Verificación de Resultados de Selección'},
    {id: 'verificacionresultadosseleccion_2',date: '25 Jan 2022, 09:00 AM', end: '25 Jan 2022, 05:00 PM',hour: '09:00 AM',content: 'Verificación de Resultados de Selección'},
    {id: 'matriculaetapa1',date: '25 Jan 2022',content: 'Proceso de Matrícula: Inicio de primera etapa'},
    {id: 'periodoretracto',date: '25 Jan 2022',content: 'Inicio período de Retracto'},
    {id: 'matriculaetapa1_cierre',date: '27 Jan 2022',content: 'Proceso de Matrícula: Cierre de primera etapa'},
    {id: 'matriculaetapa2',date: '28 Jan 2022',content: 'Proceso de Matrícula: Inicio de segunda etapa'},
    {id: 'matriculaetapa2_cierre',date: '03 Feb 2022',content: 'Proceso de Matrícula: Cierre de segunda etapa'},
    {id: 'periodoretracto_cierre',date: '03 Feb 2022',content: 'Cierre período de Retracto'},
];

// Generate elements but remove the old ones (1 month old)
const canShowDate = (dateString) => {const date = new Date(dateString);const now = new Date();const diff = now - date;const oneMonth = 1000 * 60 * 60 * 24 * 30;return diff < oneMonth;};const datesEl=document.getElementById('dates');dates.filter(data => canShowDate(data.date)).forEach(data=>{const div1=document.createElement('div');div1.classList.add('w-full','max-w-md');const div2=document.createElement('div');div2.classList.add('bg-gray-50','shadow-md','rounded','p-7','mb-4','hover:shadow-xl','transition-all','duration-500','fecha');div2.id=data.id;div2.setAttribute('data-date',data.date);if(data.hour){div2.setAttribute('data-hour',data.hour)}if(data.end){div2.setAttribute('data-end',data.end)}const div3=document.createElement('div');div3.classList.add('mb-4');const h1=document.createElement('h1');h1.classList.add('text-xl','font-bold','text-gray-800');h1.innerText=`${data.content } - `;const spanDate=document.createElement('span');spanDate.id=`${data.id }-date`;h1.appendChild(spanDate);div3.appendChild(h1);const div4=document.createElement('div');div4.classList.add('mt-5');const spanExtra=document.createElement('span');spanExtra.id=`${data.id }-extra`;const daysSpan=document.createElement('span');const dataDaysSpan=document.createElement('span');dataDaysSpan.id=`${data.id }-days`;dataDaysSpan.innerHTML='0';dataDaysSpan.classList.add('font-bold');daysSpan.appendChild(dataDaysSpan);daysSpan.append(' Días ');const hoursSpan=document.createElement('span');const dataHoursSpan=document.createElement('span');dataHoursSpan.id=`${data.id }-hours`;dataHoursSpan.innerHTML='0';dataHoursSpan.classList.add('font-bold');hoursSpan.appendChild(dataHoursSpan);hoursSpan.append(' Horas ');const minutesSpan=document.createElement('span');const dataMinutesSpan=document.createElement('span');dataMinutesSpan.id=`${data.id }-minutes`;dataMinutesSpan.innerHTML='0';dataMinutesSpan.classList.add('font-bold');minutesSpan.appendChild(dataMinutesSpan);minutesSpan.append(' Minutos ');const secondsSpan=document.createElement('span');const dataSecondsSpan=document.createElement('span');dataSecondsSpan.id=`${data.id }-seconds`;dataSecondsSpan.innerHTML='0';dataSecondsSpan.classList.add('font-bold');secondsSpan.appendChild(dataSecondsSpan);secondsSpan.append(' Segundos ');div4.appendChild(spanExtra);div4.appendChild(daysSpan);div4.appendChild(hoursSpan);div4.appendChild(minutesSpan);div4.appendChild(secondsSpan);div3.appendChild(div4);div2.appendChild(div3);div1.appendChild(div2);datesEl.appendChild(div1)});
// Updater
const settings = {soundNotifications: false};
const months=['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];const keys=[];const sent=[];const getAMPM=(date)=>{let hours=date.getHours();let minutes=date.getMinutes();let ampm=hours>=12?'pm':'am';hours=hours%12;hours=hours?hours:12;minutes=minutes<10?'0'+minutes:minutes;return hours+':'+minutes+' '+ampm};document.querySelectorAll('.fecha').forEach(el=>{if(!keys.includes(el.getAttribute('id'))){keys.push(el.getAttribute('id'))}});const update=(date,key)=>{var now=new Date();let endString=document.getElementById(key).getAttribute('data-end');if(endString!=null){document.getElementById(key+'-extra').innerText='Inicia En: '}let end=endString!=null?new Date(endString):date;let stopUpdate=false;let isToday=end.getDate()==now.getDate()&&end.getMonth()==now.getMonth()&&end.getFullYear()==now.getFullYear();if(now>date||now>end){if(endString!=null){if(now<end){date=end;document.getElementById(key+'-extra').innerText='Termina en: '}else{stopUpdate=true;document.getElementById(key+'-extra').innerText='Ha finalizado'+(isToday?' (Es hoy)':'')+'. '}}else{stopUpdate=true;document.getElementById(key+'-extra').innerText='Ha finalizado'+(isToday?' (Es hoy)':'')+'. '}}var days=stopUpdate?0:Math.abs(Math.trunc((date-now)/(1000*60*60*24)));var hours=stopUpdate?0:Math.abs(Math.trunc((date-now)/(1000*60*60)%24));var minutes=stopUpdate?0:Math.abs(Math.trunc((date-now)/(1000*60)%60));var seconds=stopUpdate?0:Math.abs(Math.trunc((date-now)/1000%60));document.getElementById(key+'-days').innerText=days;document.getElementById(key+'-hours').innerText=hours;document.getElementById(key+'-minutes').innerText=minutes;document.getElementById(key+'-seconds').innerText=seconds;if(settings.soundNotifications){if(!stopUpdate&&!sent.includes(key)){if(days==0&&hours==0&&minutes==0&&seconds==0){sent.push(key);document.getElementById('ready').click();setTimeout(()=>{alert('La cuenta atrás de \''+document.getElementById(key+'-date').parentElement.innerText+'\' ha finalizado!')},1500)}}}var dayOfMonth=date.getDate();var month=date.getMonth();let dayName=(date.toLocaleDateString('es-ES',{weekday:'long'})+'');dayName=dayName.charAt(0).toUpperCase()+dayName.slice(1);let dataHour=document.getElementById(key).getAttribute('data-hour')!=null?(' a las '+document.getElementById(key).getAttribute('data-hour')):'';let dataEnd=document.getElementById(key).getAttribute('data-end')!=null?(' hasta las '+getAMPM(end)):'';document.getElementById(key+'-date').innerText=dayName+' '+dayOfMonth+' de '+months[month]+dataHour+dataEnd};const run=()=>{keys.forEach(key=>{var el=document.getElementById(key);if(el){update(new Date(document.getElementById(key).getAttribute('data-date')),key)}});setTimeout(run,500)};document.getElementById('ready').onclick=()=>{let el=document.getElementById('ready_mp3');el.volume=0.4;el.play()};document.getElementById('notifications-on').onclick=()=>{document.getElementById('notifications-on').style.display='none';document.getElementById('notifications-off').style.display='';settings.soundNotifications=false};document.getElementById('notifications-off').onclick=()=>{document.getElementById('notifications-off').style.display='none';document.getElementById('notifications-on').style.display='';settings.soundNotifications=true};run();